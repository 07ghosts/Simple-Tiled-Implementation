<!doctype html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="chrome=1" />
		<link rel="stylesheet" href="stylesheets/reset.css" />
		<link rel="stylesheet" href="stylesheets/styles.css" />
		<link rel="stylesheet" href="stylesheets/monokai_sublime.css" />
		<script src="javascripts/highlight/highlight.pack.js"></script>
		<script>
			hljs.configure({tabReplace: '    '});
			hljs.initHighlightingOnLoad();
		</script>
		<title>Simple Tiled Implementation</title>
	</head>
	<body>
		<div id="content">
			<header>
				<h1>Simple Tiled Implementation</h1>
				<p>Simple Tiled Implementation is a <a href="http://mapeditor.org/">Tiled Map Editor</a> library designed for the *awesome* <a href="https://love2d.org/">L&Ouml;VE</a> framework.</p>
				<h3>Navigation</h3>
				<nav>
					<li><a href="#new">STI.new</a></li>
					<li><a href="#addCustomLayer">Map:addCustomLayer</a></li>
					<li><a href="#convertToCustomLayer">Map:convertToCustomLayer</a></li>
					<li><a href="#removeLayer">Map:removeLayer</a></li>
					<li><a href="#update">Map:update</a></li>
					<li><a href="#draw">Map:draw</a></li>
					<li><a href="#drawLayer">Map:drawLayer</a></li>
					<li><a href="#drawTileLayer">Map:drawTileLayer</a></li>
					<li><a href="#drawObjectLayer">Map:drawObjectLayer</a></li>
					<li><a href="#drawImageLayer">Map:drawImageLayer</a></li>
					<li><a href="#createCollisionMap">Map:createCollisionMap</a></li>
					<li><a href="#drawCollisionMap">Map:drawCollisionMap</a></li>
					<li><a href="#callbacks">Callbacks</a></li>
					<li><a href="#properties">Properties</a></li>
				</nav>
			</header>
			<section>
				<h2><a id="new">STI.new(map)</a></h2>
				<p>Load and initialize an exported Lua Tiled Map.</p>
				<h3>Parameters</h3>
				<ul>
					<li><span>map</span> Path to Tiled Map (sans file extension)</li>
				</ul>
				<h3>Returns</h3>
				<ul>
					<li><span>table</span> STI Map data structure</li>
				</ul>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
end</code></pre>
			</section>
			<section>
				<h2><a id="addCustomLayer">Map:addCustomLayer(name, index)</a></h2>
				<p>Add an empty Custom Layer to the Layers Table. Custom Layers are used for adding non-Tiled data to the map, such as sprites.</p>
				<h3>Parameters</h3>
				<ul>
					<li><span>name</span> Name of New Layer</li>
					<li><span>index</span> Draw Order within Layers</li>
				</ul>
				<h3>Returns</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
	
	map:addCustomLayer("Sprite Layer", 2)
end</code></pre>
			</section>
			<section>
				<h2><a id="convertToCustomLayer">Map:convertToCustomLayer(index)</a></h2>
				<p>Convert any Tile Layer, Object Layer, or Image Layer into an empty Custom Layer.</p>
				<h3>Parameters</h3>
				<ul>
					<li><span>index</span> Layer Name or Index</li>
				</ul>
				<h3>Returns</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
	
	-- Convert using name
	map:convertToCustomLayer("Sprite Layer")
	
	-- Convert using index
	map:convertToCustomLayer(2)
end</code></pre>
			</section>
			<section>
				<h2><a id="removeLayer">Map:removeLayer(index)</a></h2>
				<p>Remove any Layer from the Layers Table.</p>
				<h3>Parameters</h3>
				<ul>
					<li><span>index</span> Layer Name or Index</li>
				</ul>
				<h3>Returns</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
	
	-- Remove using name
	map:removeLayer("Sprite Layer")
	
	-- Remove using index
	map:removeLayer(2)
end</code></pre>
			</section>
			<section>
				<h2><a id="update">Map:update(dt)</a></h2>
				<p>Update all Layers in order of Index.</p>
				<h3>Parameters</h3>
				<ul>
					<li><span>dt</span> Delta Time</li>
				</ul>
				<h3>Returns</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
end

function love.update(dt)
	map:update(dt)
end</code></pre>
			</section>
			<section>
				<h2><a id="draw">Map:draw()</a></h2>
				<p>Draw all Layers in order of Index.</p>
				<h3>Parameters</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Returns</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
end

function love.update(dt)
	map:update(dt)
end

function love.draw()
	map:draw()
end</code></pre>
			</section>
			<section>
				<h2><a id="drawLayer">Map:drawLayer(layer)</a></h2>
				<p>Execute a Layer's Draw Callback.</p>
				<h3>Parameters</h3>
				<ul>
					<li><span>layer</span> Specific Layer to Draw</li>
				</ul>
				<h3>Returns</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
end

function love.update(dt)
	map:update(dt)
end

function love.draw()
	-- Draw using name
	map:drawLayer(map.layers["Sprite Layer"])
	
	-- Draw using index
	map:drawLayer(map.layers[2])
end</code></pre>
			</section>
			<section>
				<h2><a id="drawTileLayer">Map:drawTileLayer(layer)</a></h2>
				<p>Draw a Tile Layer using the default Draw Function. When a map is initialized, all Tile Layers are given this draw function. When manually using this method, the Layer Opacity must be manually set.</p>
				<h3>Parameters</h3>
				<ul>
					<li><span>layer</span> Specific Layer to Draw</li>
				</ul>
				<h3>Returns</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
end

function love.update(dt)
	map:update(dt)
end

function love.draw()
	-- Draw using name
	love.graphics.setColor(255, 255, 255, 255 * map.layers["Ground Layer"].opacity)
	map:drawTileLayer(map.layers["Ground Layer"])
	love.graphics.setColor(255, 255, 255, 255)
	
	-- Draw using index
	love.graphics.setColor(255, 255, 255, 255 * map.layers[1].opacity)
	map:drawTileLayer(map.layers[1])
	love.graphics.setColor(255, 255, 255, 255)
end</code></pre>
			</section>
			<section>
				<h2><a id="drawObjectLayer">Map:drawObjectLayer(layer)</a></h2>
				<p>Draw an Object Layer using the default Draw Function. When a map is initialized, all Object Layers are given this draw function. When manually using this method, the Layer Opacity must be manually set.</p>
				<h3>Parameters</h3>
				<ul>
					<li><span>layer</span> Specific Layer to Draw</li>
				</ul>
				<h3>Returns</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
end

function love.update(dt)
	map:update(dt)
end

function love.draw()
	-- Draw using name
	love.graphics.setColor(255, 255, 255, 255 * map.layers["Polygons"].opacity)
	map:drawObjectLayer(map.layers["Polygons"])
	love.graphics.setColor(255, 255, 255, 255)
	
	-- Draw using index
	love.graphics.setColor(255, 255, 255, 255 * map.layers[3].opacity)
	map:drawObjectLayer(map.layers[3])
	love.graphics.setColor(255, 255, 255, 255)
end</code></pre>
			</section>
			<section>
				<h2><a id="drawImageLayer">Map:drawImageLayer(layer)</a></h2>
				<p>Draw an Image Layer using the default Draw Function. When a map is initialized, all Image Layers are given this draw function. When manually using this method, the Layer Opacity must be manually set.</p>
				<h3>Parameters</h3>
				<ul>
					<li><span>layer</span> Specific Layer to Draw</li>
				</ul>
				<h3>Returns</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
end

function love.update(dt)
	map:update(dt)
end

function love.draw()
	-- Draw using name
	love.graphics.setColor(255, 255, 255, 255 * map.layers["Watermark"].opacity)
	map:drawLayer(map.layers["Watermark"])
	love.graphics.setColor(255, 255, 255, 255)
	
	-- Draw using index
	love.graphics.setColor(255, 255, 255, 255 * map.layers[4].opacity)
	map:drawLayer(map.layers[4])
	love.graphics.setColor(255, 255, 255, 255)
end</code></pre>
			</section>
			<section>
				<h2><a id="createCollisionMap">Map:createCollisionMap(index)</a></h2>
				<p>Use a Tile Layer to create a Collision Map. The Collision Map is simply a Binary Map and does not have any collision detection built in.</p>
				<h3>Parameters</h3>
				<ul>
					<li><span>index</span> Layer Name or Index</li>
				</ul>
				<h3>Returns</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
	
	-- Create using name
	map:createCollisionMap("Collision Layer")
	
	-- Create using index
	map:createCollisionMap(5)
end

function love.update(dt)
	map:update(dt)
end

function love.draw()
	map:draw()
end</code></pre>
			</section>
			<section>
				<h2><a id="drawCollisionMap">Map:drawCollisionMap()</a></h2>
				<p>Draw the Collision Map. This can be useful for debugging your collision detection code.</p>
				<h3>Parameters</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Returns</h3>
				<ul>
					<li>none</li>
				</ul>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
	
	-- Create using name
	map:createCollisionMap("Collision Layer")
	
	-- Create using index
	map:createCollisionMap(5)
end

function love.update(dt)
	map:update(dt)
end

function love.draw()
	map:draw()
	
	map:drawCollisionMap()
end</code></pre>
			</section>
			<section>
				<h2><a id="callbacks">Callbacks</a></h2>
				<p>Every Layer has its own Update and Draw callback functions. When a map is initialized, each Layer is given an empty Update function and a Draw function respective of the Layer's type. When a Custom Layer is created, it is given empty callbacks. Both the Update and Draw callbacks can be overridden to customize your Map.</p>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
	
	-- Add a Custom Layer
	map:addCustomLayer("Sprite Layer", 2)
	
	local spriteLayer = map.layers["Sprite Layer"]
	
	-- Add custom data to layer
	spriteLayer.sprite = {
		image = love.graphics.newImage("assets/sprites/pickle.png"),
		x = 128,
		y = 128,
		r = 0,
	}
	
	-- Override Update callback
	function spriteLayer:update(dt)
		self.sprite.r = self.sprite.r + 90 * dt
	end
	
	-- Override Draw callback
	function spriteLayer:draw()
		local x = math.floor(self.sprite.x)
		local y = math.floor(self.sprite.y)
		local r = math.rad(self.sprite.r)
		
		love.graphics.draw(self.sprite.image, x, y, r)
	end
end

function love.update(dt)
	map:update(dt)
end

function love.draw()
	map:draw()
end</code></pre>
			</section>
			<section>
				<h2><a id="properties">Properties</a></h2>
				<p>Every Layer has its own properties that are used when updating or drawing the layer. Each of these properties can be modified, but should only be modified by a user who knows what they are doing.</p>
				<h3>Example</h3>
				<pre><code class="language-lua">local sti = require "libs.sti"

function love.load()
	map = sti.new("assets/maps/map01")
	
	local groundLayer = map.layers["Ground"]
	
	-- Change a tile
	local x = 8 -- x coordinate of the tile
	local y = 15 -- y coordinate of the tile
	local gid = 572 -- Global ID of the new tile
	
	groundLayer.data[y][x] = map.tiles[gid]
	
	-- Stop drawing layer
	groundLayer.visible = false -- true to draw again
	
	-- Layer opacity
	groundLayer.opacity = 0.75 -- 0 for transparent, 1 for opaque
	
	-- Offset layer in pixels (this can be useful for parallax)
	groundLayer.x = -17 -- negative numbers offset left/up
	groundLayer.y = 34 -- positive numbers offset right/down
end</code></pre>
			</section>
		</div>
		<footer>
			<span>&copy; 2014 Landon Manning |</span>
			<span>Published with <a href="http://pages.github.com" target="_new">GitHub Pages</a> |</span>
			<span><a href="https://github.com/karai17/Simple-Tiled-Implementation">View On GitHub</a> |</span>
			<span><a href="https://github.com/karai17/Simple-Tiled-Implementation/zipball/master">ZIP</a> |</span>
			<span><a href="https://github.com/karai17/Simple-Tiled-Implementation/tarball/master">TAR</a></span>
		</footer>
	</body>
</html>